{"version":3,"file":null,"sources":["../lib/time.js","../lib/pureRender.js","../lib/prefix.js","../lib/DatePickerItem.js","../lib/DatePicker.js","../lib/Modal.js","../lib/index.js"],"sourcesContent":["/**\n * @module time工具\n */\n\n\nfunction throwIfInvalidDate(date) {\n    if (Object.prototype.toString.call(date, null) !== '[object Date]') {\n        throw new Error('参数类型不对');\n    }\n}\n\nfunction daysInMonth(year, month) {\n    return new Date(year, month + 1, 0).getDate();\n}\n\n/**\n * 对Date的扩展，将 Date 转化为指定格式的String\n * @param  {Date}       日期\n * @return {String}     字符串格式\n */\nexport function convertDate(date, format) {\n    let str = format;\n    const o = {\n        'M+': date.getMonth() + 1,\n        'D+': date.getDate(),\n        'h+': date.getHours(),\n        'm+': date.getMinutes(),\n        's+': date.getSeconds(),\n    };\n    if (/(Y+)/.test(format)) {\n        str = str.replace(RegExp.$1,\n                (date.getFullYear().toString()).substr(4 - RegExp.$1.length));\n    }\n\n    for (const k in o) { // eslint-disable-line\n        if (new RegExp(`(${k})`).test(format)) {\n            str = str.replace(RegExp.$1,\n                (RegExp.$1.length === 1) ?\n                o[k] : (`00${o[k]}`.substr((o[k].toString()).length)));\n        }\n    }\n\n    return str;\n}\n\n/**\n * 获取相对日期的偏移日期\n * @param  {Date}       日期\n * @return {number}     相对的天数\n */\nexport function nextYear(now, index = 0) {\n    throwIfInvalidDate(now);\n    const date = new Date(now.getFullYear() + index, now.getMonth(), now.getDate());\n    return date;\n}\n\nexport function nextMonth(now, index = 0) {\n    throwIfInvalidDate(now);\n    const year = now.getFullYear();\n    const month = now.getMonth() + index;\n    const dayOfMonth = Math.min(now.getDate(), daysInMonth(year, month));\n    const date = new Date(year, month, dayOfMonth);\n    return date;\n}\n\nexport function nextDate(now, index = 0) {\n    throwIfInvalidDate(now);\n    const date = new Date(now.getFullYear(), now.getMonth(), now.getDate() + index);\n    return date;\n}\n","export function shallowEqual(prev, next) {\n    if (prev === next) return true;\n    const prevKeys = Object.keys(prev);\n    const nextKeys = Object.keys(next);\n\n    if (prevKeys.length !== nextKeys.length) return false;\n\n    return prevKeys.every((key) => {\n        return prev.hasOwnProperty(key) && prev[key] === next[key];\n    });\n}\n\nfunction PureRender(Component) {\n    Component.prototype.shouldComponentUpdate = function(nextProps, nextState) {\n        return PureRender.shouldComponentUpdate(nextProps, nextState, this.props, this.state);\n    };\n}\n\nPureRender.shouldComponentUpdate = function (nextProps, nextState, preProps, preState) {\n    return !shallowEqual(preProps, nextProps) || !shallowEqual(preState, nextState);\n};\n\nexport default PureRender;\n","/**\n * 驼峰写法\n * @param  {String} str 要转化的字符串\n * @return {String}     转化后的字符串\n */\nexport function camelCase(str) {\n    return str.replace(/-([a-z])/g, ($0, $1) => $1.toUpperCase()).replace('-', '');\n}\n\n/**\n * 格式化css属性对象\n * @param  {Object} props 属性对象\n * @return {Object}       添加前缀的格式化属性对象\n */\nexport function formatCss(props) {\n    const prefixs = ['-webkit-', '-moz-', '-ms-'];\n\n    const result = {};\n\n    const regPrefix = /transform|transition/;\n\n\n    for (const key in props) {\n        if (props.hasOwnProperty(key)) {\n            const styleValue = props[key];\n\n            // 如果检测是transform或transition属性\n            if (regPrefix.test(key)) {\n                for (let i = 0; i < prefixs.length; i++) {\n                    const styleName = camelCase(prefixs[i] + key);\n                    result[styleName] = styleValue.replace(regPrefix, `${prefixs[i]}$&`);\n                }\n            }\n\n            result[key] = styleValue;\n        }\n    }\n\n    return result;\n}\n\n/**\n * 为元素添加css样式\n * @param {Object} element 目标元素\n * @param {Object} props   css属性对象\n */\nexport function addPrefixCss(element, props) {\n    const formatedProps = formatCss(props);\n    for (const key in formatedProps) {\n        if (formatedProps.hasOwnProperty(key)) {\n            element.style[key] = formatedProps[key];\n        }\n    }\n}\n","\n/**\n * @module Date组件\n */\nimport React, { Component, PropTypes } from 'react';\nimport * as TimeUtil from './time.js';\nimport { shallowEqual } from './pureRender.js';\nimport { addPrefixCss, formatCss } from './prefix.js';\n\nconst DATE_HEIGHT = 40;                              // 每个日期的高度\nconst DATE_LENGTH = 10;                              // 日期的个数\nconst MIDDLE_INDEX = Math.floor(DATE_LENGTH / 2);     // 日期数组中间值的索引\nconst MIDDLE_Y = - DATE_HEIGHT * MIDDLE_INDEX;       // translateY值\n\n\n/**\n * Class Date组件类\n * @extends Component\n */\nclass DatePickerItem extends Component {\n    constructor(props) {\n        super(props);\n        this.animating = false;                 // 判断是否在transition过渡动画之中\n        this.touchY = 0;                        // 保存touchstart的pageY\n        this.translateY = 0;                    // 容器偏移的距离\n        this.currentIndex = MIDDLE_INDEX;       // 滑动中当前日期的索引\n\n        this.state = {\n            translateY: MIDDLE_Y,\n            marginTop: (this.currentIndex - MIDDLE_INDEX) * DATE_HEIGHT,\n        };\n\n        this.renderDatepickerItem = this.renderDatepickerItem.bind(this);\n        this.handleContentTouch = this.handleContentTouch.bind(this);\n        this.handleContentMouseDown = this.handleContentMouseDown.bind(this);\n        this.handleContentMouseMove = this.handleContentMouseMove.bind(this);\n        this.handleContentMouseUp = this.handleContentMouseUp.bind(this);\n    }\n\n    componentWillMount() {\n        this._iniDates(this.props.value);\n    }\n\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.value.getTime() === this.props.value.getTime()) {\n            return;\n        }\n        this._iniDates(nextProps.value);\n        this.currentIndex = MIDDLE_INDEX;\n        this.setState({\n            translateY: MIDDLE_Y,\n            marginTop: (this.currentIndex - MIDDLE_INDEX) * DATE_HEIGHT,\n        });\n    }\n\n    /**\n     * Optimization component, Prevents unnecessary rendering\n     * Only value or state change should re-rendering\n     *\n     * @param  {Object} nextProps next props\n     * @param  {Object} nextState next state\n     * @return {Boolean}          Whether re-rendering\n     */\n    shouldComponentUpdate(nextProps, nextState) {\n        return nextProps.value.getTime() !== this.props.value.getTime() ||\n            !shallowEqual(nextState, this.state);\n    }\n\n    _iniDates(date) {\n        const { typeName } = this.props;\n        const dates = Array(...Array(DATE_LENGTH))\n            .map((value, index) =>\n                TimeUtil[`next${typeName}`](date, index - MIDDLE_INDEX));\n        this.setState({ dates });\n    }\n\n    _updateDates(direction) {\n        const { typeName } = this.props;\n        const { dates } = this.state;\n        if (direction === 1) {\n            this.currentIndex ++;\n            this.setState({\n                dates: [\n                    ...dates.slice(1),\n                    TimeUtil[`next${typeName}`](dates[dates.length - 1], 1),\n                ],\n                marginTop: (this.currentIndex - MIDDLE_INDEX) * DATE_HEIGHT,\n            });\n        } else {\n            this.currentIndex --;\n            this.setState({\n                dates: [\n                    TimeUtil[`next${typeName}`](dates[0], -1),\n                    ...dates.slice(0, dates.length - 1),\n                ],\n                marginTop: (this.currentIndex - MIDDLE_INDEX) * DATE_HEIGHT,\n            });\n        }\n    }\n\n    _checkIsUpdateDates(direction, translateY) {\n        return direction === 1 ?\n            this.currentIndex * DATE_HEIGHT + DATE_HEIGHT / 2 < -translateY :\n            this.currentIndex * DATE_HEIGHT - DATE_HEIGHT / 2 > -translateY;\n    }\n\n    /**\n     * 清除对象的transition样式\n     * @param  {Dom}     obj     指定的对象\n     * @return {undefined}\n     */\n    _clearTransition(obj) {\n        addPrefixCss(obj, { transition: '' });\n    }\n\n    /**\n     * 滑动到下一日期\n     * @param  {number} direction 滑动方向\n     * @return {undefined}\n     */\n    _moveToNext(direction) {\n        const date = this.state.dates[MIDDLE_INDEX];\n        const { max, min } = this.props;\n        if (direction === -1 && date.getTime() < min.getTime()) {\n            this._updateDates(1);\n        } else if (direction === 1 && date.getTime() > max.getTime()) {\n            this._updateDates(-1);\n        }\n\n        this._moveTo(this.refs.scroll, this.currentIndex);\n    }\n\n    /**\n     * 添加滑动动画\n     * @param  {DOM} obj   DOM对象\n     * @param  {number} angle 角度\n     * @return {undefined}\n     */\n    _moveTo(obj, currentIndex) {\n        this.animating = true;\n\n        addPrefixCss(obj, { transition: 'transform .2s ease-out' });\n\n        this.setState({\n            translateY: -currentIndex * DATE_HEIGHT,\n        });\n\n        // NOTE: There is no transitionend, setTimeout is used instead.\n        setTimeout(() => {\n            this.animating = false;\n            this.props.onSelect(this.state.dates[MIDDLE_INDEX]);\n            this._clearTransition(this.refs.scroll);\n        }, 200);\n    }\n\n    handleStart(event) {\n        this.touchY = event.pageY || event.targetTouches[0].pageY;\n        this.translateY = this.state.translateY;\n    }\n\n\n    handleMove(event) {\n        const touchY = event.pageY || event.targetTouches[0].pageY;\n        const dir = touchY - this.touchY;\n        const translateY = this.translateY + dir;\n        const direction = dir > 0 ? -1 : 1;\n\n        // 日期最小值，最大值限制\n        const date = this.state.dates[MIDDLE_INDEX];\n        const { max, min } = this.props;\n        if (date.getTime() < min.getTime() ||\n            date.getTime() > max.getTime()) {\n            return;\n        }\n\n        // 检测是否更新日期列表\n        if (this._checkIsUpdateDates(direction, translateY)) {\n            this._updateDates(direction);\n        }\n\n        this.setState({ translateY });\n    }\n\n    handleEnd(event) {\n        const touchY = event.pageY || event.changedTouches[0].pageY;\n        const dir = touchY - this.touchY;\n        const direction = dir > 0 ? -1 : 1;\n        this._moveToNext(direction);\n    }\n\n    /**\n     * 滑动日期选择器触屏事件\n     * @param  {Object} event 事件对象\n     * @return {undefined}\n     */\n    handleContentTouch(event) {\n        event.preventDefault();\n        if (this.animating) return;\n        if (event.type === 'touchstart') {\n            this.handleStart(event);\n        } else if (event.type === 'touchmove') {\n            this.handleMove(event);\n        } else if (event.type === 'touchend') {\n            this.handleEnd(event);\n        }\n    }\n\n    /**\n     * 滑动日期选择器鼠标事件\n     * @param  {Object} event 事件对象\n     * @return {undefined}\n     */\n    handleContentMouseDown(event) {\n        if (this.animating) return;\n        this.handleStart(event);\n        document.addEventListener('mousemove', this.handleContentMouseMove);\n        document.addEventListener('mouseup', this.handleContentMouseUp);\n    }\n\n    handleContentMouseMove(event) {\n        if (this.animating) return;\n        this.handleMove(event);\n    }\n\n    handleContentMouseUp(event) {\n        if (this.animating) return;\n        this.handleEnd(event);\n        document.removeEventListener('mousemove', this.handleContentMouseMove);\n        document.removeEventListener('mouseup', this.handleContentMouseUp);\n    }\n\n    /**\n     * 渲染一个日期DOM对象\n     * @param  {Object} date date数据\n     * @return {Object}      JSX对象\n     */\n    renderDatepickerItem(date, index) {\n        const className =\n            (date < this.props.min || date > this.props.max) ?\n            'disabled' : '';\n\n        return (\n            <li\n                key={index}\n                className={className}>\n                {TimeUtil.convertDate(date, this.props.format)}\n            </li>\n        );\n    }\n\n    render() {\n        const scrollStyle = formatCss({\n            transform: `translateY(${this.state.translateY}px)`,\n            marginTop: this.state.marginTop,\n        });\n\n        return (\n            <div className=\"datepicker-col-1\">\n                <div\n                    className=\"datepicker-viewport\"\n                    onTouchStart={this.handleContentTouch}\n                    onTouchMove={this.handleContentTouch}\n                    onTouchEnd={this.handleContentTouch}\n                    onMouseDown={this.handleContentMouseDown}>\n                    <div className=\"datepicker-wheel\">\n                        <ul\n                            ref=\"scroll\"\n                            className=\"datepicker-scroll\"\n                            style={scrollStyle}>\n                            {this.state.dates.map(this.renderDatepickerItem)}\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nDatePickerItem.propTypes = {\n    value: PropTypes.object,\n    min: PropTypes.object,\n    max: PropTypes.object,\n    format: PropTypes.string,\n    typeName: PropTypes.string,\n    onSelect: PropTypes.func,\n};\n\nexport default DatePickerItem;\n","/**\n * @module DatePicker Component\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport DatePickerItem from './DatePickerItem.js';\nimport PureRender from './pureRender.js';\nimport { convertDate, nextDate } from './time.js';\n\n/**\n * Class DatePicker Component Class\n * @extends Component\n */\nclass DatePicker extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            value: nextDate(this.props.value),\n        };\n\n        this.handleFinishBtnClick = this.handleFinishBtnClick.bind(this);\n        this.handleDateSelect = this.handleDateSelect.bind(this);\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // update value of state\n        const date = nextDate(nextProps.value);\n        if (date.getTime() !== this.state.value.getTime()) {\n            this.setState({ value: date });\n        }\n    }\n\n    /**\n     * Optimization component, Prevents unnecessary rendering\n     * Only props or state change or value before re-rendering\n     *\n     * @param  {Object} nextProps next props\n     * @param  {Object} nextState next state\n     * @return {Boolean}          Whether re-rendering\n     */\n    shouldComponentUpdate(nextProps, nextState) {\n        const date = nextDate(nextState.value);\n        return date.getTime() !== this.state.value.getTime() ||\n                PureRender.shouldComponentUpdate(nextProps, nextState, this.props, this.state);\n    }\n\n    /**\n     * 点击完成按钮事件\n     * @return {undefined}\n     */\n    handleFinishBtnClick() {\n        this.props.onSelect(this.state.value);\n    }\n\n    /**\n     * 选择下一个日期\n     * @return {undefined}\n     */\n    handleDateSelect(value) {\n        this.setState({ value });\n    }\n\n    /**\n     * render函数\n     * @return {Object} JSX对象\n     */\n    render() {\n        const { min, max, theme, dateFormat } = this.props;\n        const value = this.state.value;\n        const themeClassName =\n            ['default', 'dark', 'ios', 'android', 'android-dark'].indexOf(theme) === -1 ?\n            'default' : theme;\n\n        return (\n            <div\n                className={`datepicker ${themeClassName}`}>\n                <div className=\"datepicker-header\">{convertDate(value, 'YYYY/MM/DD')}</div>\n                <div className=\"datepicker-content\">\n                    <DatePickerItem\n                        value={value}\n                        min={min}\n                        max={max}\n                        typeName=\"Year\"\n                        format={dateFormat[0]}\n                        onSelect={this.handleDateSelect} />\n                    <DatePickerItem\n                        value={value}\n                        min={min}\n                        max={max}\n                        typeName=\"Month\"\n                        format={dateFormat[1]}\n                        onSelect={this.handleDateSelect} />\n                    <DatePickerItem\n                        value={value}\n                        min={min}\n                        max={max}\n                        typeName=\"Date\"\n                        format={dateFormat[2]}\n                        onSelect={this.handleDateSelect} />\n                </div>\n                <div className=\"datepicker-navbar\">\n                    <a\n                        className=\"datepicker-navbar-btn\"\n                        onClick={this.handleFinishBtnClick}>完成</a>\n                    <a\n                        className=\"datepicker-navbar-btn\"\n                        onClick={this.props.onCancel}>取消</a>\n                </div>\n            </div>\n        );\n    }\n }\n\nDatePicker.propTypes = {\n    theme: PropTypes.string,\n    value: PropTypes.object,\n    min: PropTypes.object,\n    max: PropTypes.object,\n    dateFormat: PropTypes.array,\n    onSelect: PropTypes.func,\n    onCancel: PropTypes.func,\n};\n\nexport default DatePicker;\n","import React, { Component, PropTypes } from 'react';\nimport ReactDOM from 'react-dom';\nconst renderSubtreeIntoContainer = ReactDOM.unstable_renderSubtreeIntoContainer;\n\n\nclass Modal extends Component {\n    static propTypes = {\n        children: PropTypes.node,\n        isOpen: PropTypes.bool,\n    }\n\n    static defaultProps = {\n        isOpen: false,\n    }\n\n    componentDidMount() {\n        this._div = document.createElement('div');\n        this._div.classList.add('Modal-Portal');\n        document.body.appendChild(this._div);\n        this.renderPortal(this.props);\n    }\n\n    componentWillReceiveProps(newProps) {\n        this.renderPortal(newProps);\n    }\n\n    componentWillUnmount() {\n        ReactDOM.unmountComponentAtNode(this._div);\n        this._div.parentNode.removeChild(this._div);\n    }\n\n    renderPortal(props) {\n        const portal =\n        React.cloneElement(this.props.children, { ...props, key: 'portal' }, null);\n\n        this.portal =\n        renderSubtreeIntoContainer(this, portal, this._div);\n    }\n\n    render() {\n        return (<noscript / >);\n    }\n}\n\nexport default Modal;\n","import './index.css';\nimport React, { PropTypes } from 'react';\nimport DatePicker from './DatePicker.js';\nimport Modal from './Modal.js';\n\n\nfunction EnhanceDatePicker({ isOpen, ...props }) {\n    function onModalClose(event) {\n        if (event.target === event.currentTarget) {\n            props.onCancel();\n        }\n    }\n\n    return (\n        <div\n            style={{ display: isOpen ? '' : 'none' }}\n            onClick={onModalClose}\n            className=\"datepicker-modal\">\n            <DatePicker {...props} />\n        </div>\n    );\n}\n\n\nfunction ModalDatePicker({ isPopup, ...props }) {\n    if (!isPopup) {\n        return <DatePicker {...props} />;\n    }\n\n    return (\n        <Modal {...props}>\n            <EnhanceDatePicker />\n        </Modal>\n    );\n}\n\nModalDatePicker.propTypes = {\n    isPopup: PropTypes.bool,\n    isOpen: PropTypes.bool,\n    theme: PropTypes.string,\n    value: PropTypes.object,\n    min: PropTypes.object,\n    max: PropTypes.object,\n    dateFormat: PropTypes.array,\n    onSelect: PropTypes.func,\n    onCancel: PropTypes.func,\n};\n\nModalDatePicker.defaultProps = {\n    isPopup: true,\n    isOpen: false,\n    theme: 'default',\n    value: new Date(),\n    min: new Date(1970, 0, 1),\n    max: new Date(2050, 0, 1),\n    dateFormat: ['YYYY', 'M', 'D'],\n    onSelect: () => {},\n    onCancel: () => {},\n};\n\nexport default ModalDatePicker;\n"],"names":["React","Component","PropTypes"],"mappings":"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"}